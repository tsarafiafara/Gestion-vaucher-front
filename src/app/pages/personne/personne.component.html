<div style="text-align: center;">
  <strong>PERSONNELS SUIVI</strong>
</div>

<form class="personne-form" (ngSubmit)="savePersonne()">

  <!-- Personne -->
  <div class="form-group">
    <label>Nom :</label>
    <input type="text" id="nom" [(ngModel)]="personneForm.nom" name="personneNom" required />
  </div>

  <div class="form-group">
    <label>Prénom :</label>
    <input type="text" id="prenom" [(ngModel)]="personneForm.prenom" name="personnePrenom" required />
  </div>

  <div class="form-group">
    <label>Date de naissance :</label>
    <input type="date" id="dateNaissance" [(ngModel)]="personneForm.dateNaissance" name="dateNaissance" required />
  </div>

  <div class="form-group">
    <label>Sexe :</label>
    <select id="sexe" [(ngModel)]="personneForm.sexe" name="personneSexe" required>
      <option value="">-- Sélectionnez --</option>
      <option value="M">Masculin</option>
      <option value="F">Féminin</option>
    </select>
  </div>

  <!-- Etablissement Sanitaire -->
  <div class="form-group">
    <label>Nom Etablissement :</label>
    <input type="text" [(ngModel)]="etablissement.nom" name="etabNom" required />
  </div>

  <div class="form-group">
    <label>Région :</label>
    <select [(ngModel)]="selectedRegion" (change)="onRegionChange()" name="region" required [ngModelOptions]="{standalone: true}">
      <option *ngFor="let r of regions" [ngValue]="r">{{ r.nom }}</option>
    </select>
  </div>

  <div class="form-group">
    <label>District :</label>
    <select [(ngModel)]="selectedDistrict" (change)="onDistrictChange()" name="district" required [ngModelOptions]="{standalone: true}">
      <option *ngFor="let d of selectedRegion?.districts" [ngValue]="d">{{ d.nom }}</option>
    </select>
  </div>

  <div class="form-group">
    <label>Commune :</label>
    <select [(ngModel)]="selectedCommune" name="commune" required [ngModelOptions]="{standalone: true}">
      <option *ngFor="let c of selectedDistrict?.communes" [value]="c">{{ c }}</option>
    </select>
  </div>
  <!-- Bouton -->
  <div class="form-group">
    <button type="submit">{{ isEditMode ? 'Modifier' : 'Ajouter' }}</button>
  </div>

</form>

	<div class="actions">
	<button type="button" (click)="refresh()">🔄 Actualiser</button>
	</div>
<table class="personne-table">
  <thead>
    <tr>
      <th>Nom</th>
      <th>Prénom</th>
      <th>Date Naissance</th>
      <th>Sexe</th>
      <th>ID Établissement</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of personnes">
      <td>{{ p.nom }}</td>
      <td>{{ p.prenom }}</td>
      <td>{{ p.dateNaissance | date:'dd/MM/yyyy' }}</td>

      <td>{{ p.sexe }}</td>
      <td>{{ p.etablissementSanitaireId }}</td>
      <td>
        <button (click)="editPersonne(p)">✏️  Modifier</button>
        <button *ngIf="p.id !== undefined" (click)="deletePersonne(p.id)">🗑️ Supprimer</button>

      </td>
    </tr>
  </tbody>
</table>

